<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Building a Killer WebRTC Video Chat App using PubNub &#038; Parse</title>
    <link rel="apple-touch-icon" sizes="57x57" href="/img/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/img/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/img/favicon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/img/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/img/favicon/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon-180x180.png">
    <meta name="apple-mobile-web-app-title" content="Parse">
    <link rel="icon" type="image/png" href="/img/favicon/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/img/favicon/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/img/favicon/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/img/favicon/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/img/favicon/favicon-32x32.png" sizes="32x32">
    <meta name="msapplication-TileColor" content="#5298fc">
    <meta name="msapplication-TileImage" content="/img/favicon/apple-touch-icon-144x144.png">
    <meta name="application-name" content="Parse">
    <meta name="theme-color" content="#5298fc">
    <!-- CSS -->
    <!-- build:css -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/default.min.css">
    <link href="/css/blog.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" rel="stylesheet" />
    <!-- endbuild -->
    <!--[if lte IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/classlist/2014.01.31/classList.min.js"></script>
    <![endif]-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.js"></script>
    <!--[if lt IE 8]>
    <link rel="stylesheet" type="text/css" href="/stylesheets/ie7.css" />
    <![endif]-->
    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/stylesheets/ie8.css" />
    <![endif]-->
    <!--[if lt IE 10]>
    <link rel="stylesheet" type="text/css" href="/stylesheets/ie89.css" />
    <![endif]-->
    <script>if(Function('/*@cc_on return document.documentMode===10@*/')()){document.documentElement.className+=' ie10';}</script>
    <meta name="csrf-param" content="authenticity_token">
    <meta name="csrf-token" content="KxDoKysxiXDIRV8VXwDYlQStDGzjbGZ24y6ZgQLYAsE=">
    <meta name="description" content="The best place to stay up-to-date with the latest Parse news and events.
">
    <meta name="keywords" content="backend, mobile, development, server, code">
    <meta property="fb:app_id" content="361736430535656">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Parse">
    <meta property="og:image" content="http://blog.parseplatform.org//assets/images/social.jpg">
    <meta property="og:description" content="The best place to stay up-to-date with the latest Parse news and events.
">
    <meta property="og:url" content="http://blog.parseplatform.org//learn/building-a-killer-webrtc-video-chat-app-using-pubnub-parse/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body class="pure p_docs p_docs_index  user_logged_in">
<div class="site__wrapper">
    <div class="site__content">
        <div class="content__wrapper">
            <header class="site__header site__header--white">
    <div class="container">
        <a href="/" class="header-logo">
            <span class="hidden">Parse</span>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 viewBox="0 0 152 60" style="enable-background:new 0 0 152 60;" xml:space="preserve">
            <g>
            	<path class="line one" d="M23.072,39.678c-0.011,3.348-2.395,4.615-4.909,4.615c-2.851,0-4.541-1.701-4.541-4.357
            		c0-2.964,2.031-4.667,5.35-4.725h13.611c6.428,0.079,10.137-5.391,10.137-9.953c0-4.598-3.485-9.598-9.622-9.842
            		c-6.083-0.242-9.99,5.281-9.99,11.167v3.863"/>
            	<path class="line two" d="M23.072,39.678c-0.011,3.348-2.395,4.615-4.909,4.615c-2.851,0-4.541-1.701-4.541-4.357
            		c0-2.964,2.031-4.667,5.35-4.725h13.611c6.428,0.079,10.137-5.391,10.137-9.953c0-4.598-3.485-9.598-9.622-9.842
            		c-6.083-0.242-9.99,5.281-9.99,11.167v3.863"/>
            	<path class="line three" d="M23.072,39.678c-0.011,3.348-2.395,4.615-4.909,4.615c-2.851,0-4.541-1.701-4.541-4.357
            		c0-2.964,2.031-4.667,5.35-4.725h13.611c6.428,0.079,10.137-5.391,10.137-9.953c0-4.598-3.485-9.598-9.622-9.842
            		c-6.083-0.242-9.99,5.281-9.99,11.167v3.863"/>
            	<path class="st1" d="M151.88,31.106c0-4.561-2.575-7.835-7.173-7.872c-5.665-0.037-9.197,4.12-9.197,10.484v0.11
            		c0,6.033,3.863,9.601,9.601,9.601c1.839,0,4.083-0.405,5.739-1.177v-3.568c-1.839,0.956-3.752,1.398-5.408,1.398
            		c-3.568,0-6.07-1.803-6.18-5.959h12.36C151.807,33.056,151.88,32.026,151.88,31.106z M148.312,31.07h-8.829
            		c0.625-3.053,2.354-4.745,4.966-4.745c2.575,0,3.863,1.729,3.863,4.561V31.07z"/>
            	<path class="st1" d="M125.725,34.712l0.405,0.147c2.869,1.03,3.531,1.655,3.531,2.906c0,1.471-0.993,2.428-3.458,2.428
            		c-1.986,0-4.12-0.662-6.364-1.692v3.752c1.803,0.699,4.12,1.177,6.364,1.177c4.819,0,7.21-2.428,7.21-5.812
            		c0-2.943-1.471-4.525-5.408-5.959l-0.405-0.147c-3.127-1.14-3.752-1.655-3.752-2.869c0-1.361,0.956-2.281,3.237-2.281
            		c1.839,0,3.642,0.589,5.408,1.435v-3.531c-1.582-0.625-3.348-1.03-5.26-1.03c-4.598,0-7.1,2.575-7.1,5.886
            		C120.134,31.695,121.679,33.24,125.725,34.712"/>
            	<path class="st1" d="M110.863,29.892c1.288-2.023,3.09-3.016,5.26-3.016c0.773,0,1.508,0.11,2.17,0.331v-3.384
            		c-0.625-0.258-1.361-0.405-2.134-0.405c-2.281,0-4.01,1.03-5.518,3.09l-0.258-2.869h-3.164v19.386h3.642V29.892z"/>
            	<path class="st1" d="M96.481,23.197c-2.281,0-4.672,0.699-6.474,1.692v3.605c2.023-1.251,4.378-2.023,6.254-2.023
            		c2.612,0,3.679,1.14,3.679,3.274v1.619c-5.334,0.147-8.461,1.03-10.116,2.685c-1.177,1.14-1.692,2.685-1.692,4.267
            		c0,3.274,2.354,5.15,5.702,5.15c2.244,0,4.378-0.92,6.327-2.796l0.221,2.354h3.164V30.003
            		C103.544,25.405,101.263,23.197,96.481,23.197z M99.938,37.728c-1.471,1.619-3.2,2.722-5.297,2.722
            		c-1.729,0-2.833-0.883-2.833-2.428c0-2.281,1.876-3.642,8.13-3.826V37.728z"/>
            	<path class="st1" d="M77.609,17.643h-8.571v25.383h3.826v-8.314h4.745c5.923,0,9.491-3.164,9.491-8.498V26.14
            		C87.1,20.806,83.532,17.643,77.609,17.643z M83.311,26.214c0,3.421-1.986,5.04-5.444,5.04h-5.003V21.101h5.04
            		c3.421,0,5.408,1.619,5.408,5.04V26.214z"/>
            	<path class="st1" d="M27.838,2.192C12.204,2.192-0.12,14.589-0.12,30.15c0,15.597,12.323,27.958,27.958,27.958
            		c15.634,0,27.958-12.36,27.958-27.958C55.795,14.589,43.472,2.192,27.838,2.192z M32.473,36.955H18.752
            		c-1.986,0-3.164,1.214-3.164,3.017c0,1.582,1.067,2.722,2.612,2.722c1.766,0,2.796-1.214,2.906-3.016h4.01
            		c-0.184,4.341-2.906,6.658-6.953,6.658c-3.789,0-6.585-2.575-6.585-6.401c0-3.973,2.98-6.769,7.394-6.769h13.611
            		c4.598,0,8.093-3.348,8.093-7.909c0-4.598-3.127-7.799-7.578-7.799c-4.414,0-7.946,3.237-7.946,9.123v3.863h-4.046v-3.863
            		c0-7.872,5.076-12.986,12.066-12.986c6.695,0,11.551,4.782,11.551,11.588C44.723,32.026,39.499,36.955,32.473,36.955z"/>
            </g>
            </svg>
        </a>
        <a class="header-hamburger" data-menu-trigger="toggle">
            <span class="header-hamburger__wrap">
                <span class="header-hamburger__line--top"></span>
                <span class="header-hamburger__line--middle"></span>
                <span class="header-hamburger__line--bottom"></span>
                <span class="header-hamburger__line--arrow-top"></span>
                <span class="header-hamburger__line--arrow-bottom"></span>
            </span>
        </a>
        <ul class="header-nav">
            <li><a href="http://docs.parseplatform.org">Docs</a></li>
            <li><a class="active" href="/">Blog</a></li>
        </ul>
	</div><!-- container -->
</header>

            <aside class="hero hero--docs-landing">
    <div class="grid-container">
        <div class="col--9">
            <div class="hero--docs-landing__content">
                
                
                <div>
    <span class="author">Nancy Xiao -</span>
    <span class="date">
        May
        
        19th,
        
        2015
    </span>
</div>

                <h1 class="h1 h1--white">
                    Building a Killer WebRTC Video Chat App using PubNub &#038; Parse
                </h1>
            </div>
        </div>
    </div>
</aside><!-- .hero -->
<div class="container padding-top-40 padding-bottom-50" data-nav-waypoint>
    <article role="article" class="posts">
        
        <div>
    
    <a href="/blog/categories/learn" class="btn btn--dark--outline btn--xsmall category">Learn</a>
    
    <a href="/blog/categories/tutorial" class="btn btn--dark--outline btn--xsmall category">Tutorial</a>
    
</div>

        <div class="padding-bottom-20 padding-top-20">
  
  
</div>
        <div class="padding-bottom-40 post"><p><em>Find out how Parse can be handy in building real-time video chat applications (and more) with this guest post from PubNub by Shyam Purkayastha:</em></p>

<p>WebRTC has made a huge impact on what we can do in the browser when it comes to communication and P2P sharing. With no plugins, no frameworks, and no applications to download, WebRTC is seamless for the end-user, and simple for the developer.</p>

<p>A few months ago, we built a <a href="http://www.pubnub.com/blog/building-a-webrtc-video-and-voice-chat-application/">WebRTC video chat application</a> using PubNub that allows users to call each other and video/text chat over the browser. Thinking of ways to make the initial application even more powerful, our mind went straight to our friends over at Parse to add a layer of security to the app.</p>

<p>Today we’re going to show you how we integrated <a href="https://www.parse.com/products/core">Parse Core</a> to provide authenticated access to users. This will showcase how the PubNub and Parse SDKs complement each other to build a secure web application which can be easily deployed in the cloud without the need for any server-side programming.</p>

<p><strong>Tutorial Overview</strong></p>

<p>When it comes to chat applications, authentication is a staple feature. Users expect to have this additional layer of security, allowing them to log in and out of the application, and know that the person on the other end of the communication channel is who they say they are. Authentication powered by Parse fit the bill perfectly.</p>

<p>For this demonstration, we’ll be adding the following features to the existing WebRTC application:</p>

<ol class="standard-list">
  <li>
    Login page
  </li>
  <li>
    Signup option
  </li>
  <li>
    Logout option
  </li>
</ol>

<p>We’ll be using the following SDKs from PubNub and Parse:</p>

<ol class="standard-list">
  <li>
    <a href="https://github.com/stephenlb/webrtc-sdk">PubNub WebRTC Javascript SDK</a>
  </li>
  <li>
    <a href="https://www.parse.com/docs/js_guide">Parse Javascript SDK</a>
  </li>
</ol>

<p><strong>Login Page</strong></p>

<p>To provide secured access to the WebRTC application, we first need to display a login dialog before the application UI, which will ask the user to login using his or her username and password.</p>

<p>Here’s how the Login dialog will look. This will be a modal dialog:</p>

<p><img class="alignnone size-full wp-image-3554" src="http://blog.parseplatform.org//assets/wp-content/uploads/2015/05/login_image2.png" alt="Login Image" width="581" height="223" srcset="http://blog.parseplatform.org//assets/wp-content/uploads/2015/05/login_image2.png 581w, http://blog.parseplatform.org//assets/wp-content/uploads/2015/05/login_image2-300x115.png 300w" sizes="(max-width: 581px) 100vw, 581px" /></p>

<p>The login dialog will also act as a signup dialog when the user clicks the “Signup” button. In this case, an additional UI element pops up for the signup process.</p>

<p><img class="alignnone size-full wp-image-3553" src="http://blog.parseplatform.org//assets/wp-content/uploads/2015/05/signup_image2.png" alt="Signup Image" width="577" height="259" srcset="http://blog.parseplatform.org//assets/wp-content/uploads/2015/05/signup_image2.png 577w, http://blog.parseplatform.org//assets/wp-content/uploads/2015/05/signup_image2-300x135.png 300w" sizes="(max-width: 577px) 100vw, 577px" /></p>

<p><strong>Parse Overview</strong></p>

<p>With the HTML structure in place, it’s time for some Parse fun. Parse provides APIs for managing common application requirements in the cloud. Typically, every web-enabled application needs certain essential features like user management, authentication, data persistence, and access control. Parse provides the infrastructure for managing these routine chores and more, directly from the client application without needing any server-side programming or infrastructure.</p>

<p>All we need to do is create an account with Parse.com, register an app, and with that, Parse provides the API keys to manage users and data for that app. When the user clicks on the login button, the JavaScript kicks off an API call to Parse Cloud to authenticate the user.</p>

<p>Here’s how the login code looks:</p>

<pre class="line-numbers"><code class="language-csharp">//Handler for performing Parse Login Operation
    var performLogin = function(){
        //Step 1 - Set status message
        $('#status-section').html('Attempting to login as user ' + $('#user-text').val());
        //Step 2 - Perform login via Parse
        Parse.User.logIn($('#user-text').val(), $('#password-text').val(), {
            success: function(user) {
                $('#status-section').html('Authentication successful for user ' + user.getUsername() + ' , Loading PubNub WebRTC App');
                initWebRTC();
                $('#auth-overlay').fadeOut(2000);
                setTimeout(function(){
                    $('#auth-overlay').remove();
                },3000);
            },
            error: function(user, error) {
                $('#status-section').html('Authentication failed for user ' + user.getUsername() + ' ' + error.message);
            }
        });
    }</code></pre>

<p>Assuming that the user has entered a valid username and password (with which he/she had signed up earlier), Parse Core will authenticate the user and return a success Promise object to the application. The application code will then disengage the modal dialog box making the WebRTC UI screen appear in the webpage.</p>

<p>All the previous functionality of the PubNub WebRTC application remains the same, except for the addition of the Logout button, as described below in the “Logout Option” section.</p>

<p><strong>Signup Option</strong></p>

<p>The signup dialog has an additional text field called “Retype Password” which requires the user to type the password again during signup to prevent spurious data entry.</p>

<p>The code for performing signup is similar to the code for login, except for the Parse API call.</p>

<pre class="line-numbers"><code class="language-csharp">var performSignup = function(){
        //Step 1 - Create the Parse User Object
        var user = new Parse.User();
        user.set("username", $('#user-text').val());
        user.set("password", $('#password-text').val());
        //Step 2 - Set status message
        $('#status-section').html('Attempting to signup user ' + $('#user-text').val());
        //Step 3 - Perform signup via Parse
        user.signUp(null, {
            success: function(user) {
                $('#status-section').html('User ' + user.getUsername() + ' signed up successfully , Redirecting to Login page');
                //Logout the just signed up user
                Parse.User.logOut();
                setTimeout(function(){
                    window.location.reload();
                },3000);
            },
            error: function(user, error) {
                $('#status-section').html('Signup failed for User ' + user.getUsername() + ' , ' + ' ' + error.message);
            }
        });
}</code></pre>

<p><strong>Logout Option</strong></p>

<p>After successful login, the WebRTC UI displays a “Logout” button to allow the user to log out from the application.</p>

<p><img class="alignnone wp-image-3552 size-full" src="http://blog.parseplatform.org//assets/wp-content/uploads/2015/05/logout_image2.png" alt="Logout Image" width="500" height="278" srcset="http://blog.parseplatform.org//assets/wp-content/uploads/2015/05/logout_image2.png 500w, http://blog.parseplatform.org//assets/wp-content/uploads/2015/05/logout_image2-300x167.png 300w" sizes="(max-width: 500px) 100vw, 500px" /></p>

<p><strong>Conclusion</strong></p>

<p>With this, we now have an improved version of our PubNub WebRTC App with an additional layer of security and the ability to manage access control to the main application features. PubNub takes care of the communication, while Parse takes care of the user management and authentication.</p>

<p>The principles of this tutorial, and authentication powered by Parse, can be extended beyond chat to basically any realtime application where data is sent bidirectionally between two devices, or broadcast from one to many. Live-blogging platforms, multiplayer gaming, E-commerce, and even the Internet of Things all need user management authentication as an added layer of security.</p>

<p>Pairing Parse and PubNub enables you to build both fast <em>and</em> secure realtime web, mobile, and IoT applications. You can access the complete <a href="https://github.com/shyampurk/pubnub-webrtc-parse">source code</a> here.</p>
</div>
        <div class="copy-block margin-top-40 signature">
            <div>
                <span class="author">Nancy Xiao</span>
            </div>
            <div class="margin-top-20">
                
                
                
            </div>
        </div>
    </article>
</div>

        </div><!-- /.content__wrapper -->
    </div><!-- /.site__content -->
</div><!-- /.site__wrapper -->
</body>

<script>
    anchors.options = {
      placement: 'left'
    };
    anchors.add();
</script>
</html>
